# 智能学习管理系统（本地离线版）说明

## 功能概览
- 总览：课程/资源/笔记数量，任务完成率，最近更新，新手引导
- 课程与模块：课程创建/删除、模块管理与排序，展示关联资源与笔记
- 资源库：导入并存储 PDF/图片/Word/PowerPoint/文本/通用文件；支持标签、课程关联；“打开/下载”用系统/浏览器预览器查看
- 笔记：Markdown 编辑与预览、标签与搜索；点击标题查看选中笔记内容；可删除笔记
- 任务：添加/完成勾选/删除、日历聚合展示
- 标签：添加/删除，全局选择在资源与笔记中复用
- 设置：用户数据导入与导出（JSON 备份/恢复）；外观设置（主题、背景色、主色）；编辑与预览（预览高度、是否采用 Markdown 普通回车换行）
- AI 助手：跳转 DeepSeek，对话生成按约定 JSON 的安排；支持将 AI 返回的 JSON 一键导入覆盖任务与课程/模块

## 快速开始
- 开发模式：在项目根目录执行
  - `npm install`
  - `npm run dev`
  - 浏览器打开提示地址访问
- 构建发行：
  - `npm run build`
  - 生成目录：`smart-study-manager/dist/`
  - 直接双击 `dist/index.html` 即可使用（离线）

## 离线使用（dist 文件夹）
- 将 `dist/` 整个文件夹分发给用户
- 用户双击 `dist/index.html` 即可运行
- 说明：
  - 数据存储在浏览器 IndexedDB/localStorage
  - 若某些浏览器限制 `file://` 的模块脚本，可使用轻量静态服务器（例如 `npx serve dist`）本地托管

## 数据导入与导出
- 位置：设置 → 用户数据导入与导出
- 导出：生成包含课程/模块/资源/笔记/任务/标签的 JSON；资源二进制内容以 base64 形式嵌入（适合小中型库）
- 导入：选择 JSON 文件恢复数据；导入过程会重建 `resBlobs` 表
- 大型库建议（可选方案）：
  - 引用模式（仅保存文件路径与元数据，配合实际文件拷贝）：如需此模式，可以后续在设置中加开关

## 资源库说明
- 作用：统一组织与检索学习文件（多标签、按课程/类型筛选）、与笔记/课程模块关联、备份迁移
- 查看方式：点击“打开/下载”使用系统/浏览器自带预览器查看文件（本项目不强制内嵌预览）

## 笔记与 Markdown
- 笔记编辑框支持 Markdown 语法；右侧预览固定高度并可滚动
- 设置 → 编辑与预览：
  - 预览高度：可调
  - 是否采用普通回车换行（Markdown breaks）：可开关
- 提示：笔记默认无预装内容，编辑框 placeholder 提示可参考设置中的说明

## AI 助手工作流
- 打开：侧栏 → AI 助手
- 使用步骤：
  1. 点击“生成数据摘要 JSON”获取当前任务与课程/模块的精简 JSON
  2. 点击“打开 DeepSeek 官网”（`https://chat.deepseek.com/`），将数据粘贴到对话中
  3. 参考页面内“提示词（预装）”，让 AI 按指定 JSON 格式返回建议与修改
  4. 将 AI 返回的 JSON 粘贴到“导入 DeepSeek 回复（JSON）”，点击“一键导入（覆盖本地数据）”
- 约定格式示例：
  ```json
  {
    "tasks": [
      { "title": "任务标题", "dueAt": "YYYY-MM-DD", "priority": "low|mid|high", "tags": ["标签1","标签2"] }
    ],
    "courses": [
      { "name": "课程名称", "term": "学期", "tags": ["标签"], "modules": [
        { "title": "模块标题", "order": 1 }
      ]}
    ]
  }
  ```

## 项目结构（简要）
- `src/pages/`：总览、课程、课程详情、资源库、笔记、任务、标签、设置、AI 助手
- `src/components/`：布局与通用组件
- `src/repositories/`：CRUD 封装（课程/模块/资源/笔记/任务/标签）
- `src/services/db.ts`：IndexedDB（Dexie）表与版本升级
- `src/styles/base.css`：全局样式与 CSS 变量
- `public/`：静态资源（`index.html`、`favicon.ico`等）
- `tests/`：基础仓库功能测试

## 注意事项
- 浏览器存储容量受浏览器与磁盘空间影响，导入超大文件可能耗时较长
- 若浏览器限制 `file://` 的模块脚本加载，建议使用本地 HTTP 服务托管 `dist/`
- 建议使用现代浏览器（Chrome/Edge/Firefox 等）

## 常用命令
- 开发：`npm run dev`
- 构建：`npm run build`
- 预览构建产物：`npm run preview`

