import{d}from"./db-8a84ae2f.js";import{d as y,r as c,o as g,c as a,a as s,t as l,F as f,b as k,e as v,f as n}from"./index-89733f59.js";const A={class:"col"},w={class:"grid cols-3"},b={class:"panel"},D={class:"panel"},B={class:"panel"},N={class:"panel"},x={class:"panel"},C={class:"panel"},F={key:0,class:"muted"},L={key:1,class:"muted"},M={key:2,class:"muted"},R=y({__name:"Dashboard",setup(S){const t=c({courses:0,resources:0,notes:0}),p=c(0),m=c([]);return g(async()=>{try{const r=await d.courses.toArray(),e=await d.resources.toArray(),o=await d.notes.toArray(),i=await d.tasks.toArray();t.value.courses=r.length,t.value.resources=e.length,t.value.notes=o.length;const _=i.filter(u=>u.done===!0).length;p.value=i.length?Math.round(_/i.length*100):0,m.value=o.sort((u,h)=>(h.updatedAt??0)-(u.updatedAt??0)).slice(0,5)}catch(r){console.error("Dashboard init failed",r)}}),(r,e)=>(n(),a("div",A,[e[6]||(e[6]=s("div",{class:"row"},[s("div",{class:"h1"},"总览"),s("span",{class:"muted"},"概览与最近更新")],-1)),s("div",w,[s("div",b,[e[0]||(e[0]=s("div",{class:"h3"},"课程",-1)),s("div",null,l(t.value.courses),1)]),s("div",D,[e[1]||(e[1]=s("div",{class:"h3"},"资源",-1)),s("div",null,l(t.value.resources),1)]),s("div",B,[e[2]||(e[2]=s("div",{class:"h3"},"笔记",-1)),s("div",null,l(t.value.notes),1)])]),s("div",N,[e[3]||(e[3]=s("div",{class:"h3"},"任务完成率",-1)),s("div",null,l(p.value)+"%",1)]),s("div",x,[e[4]||(e[4]=s("div",{class:"h3"},"最近更新",-1)),s("ul",null,[(n(!0),a(f,null,k(m.value,o=>(n(),a("li",{key:o.id},l(o.title)+" · "+l(new Date(o.updatedAt).toLocaleString()),1))),128))])]),s("div",C,[e[5]||(e[5]=s("div",{class:"h3"},"新手引导",-1)),t.value.courses===0?(n(),a("div",F,"暂无课程，前往“课程”页面创建一个吧。")):v("",!0),t.value.resources===0?(n(),a("div",L,"暂无资源，前往“资源库”导入文件。")):v("",!0),t.value.notes===0?(n(),a("div",M,"暂无笔记，前往“笔记”页面新建。")):v("",!0)])]))}});export{R as default};
