import{d as g,r as n,o as M,c as a,a as e,t as u,w,v as y,F as c,b as p,u as x,f as l,j as C}from"./index-986e3362.js";import{g as V,a as f,b as B}from"./courses-04590859.js";import{d as h}from"./db-a38e221e.js";import"./id-0d1586fb.js";const D={key:0,class:"col"},T={class:"row"},q={class:"h1"},A={class:"muted"},F={class:"grid cols-2"},I={class:"panel"},N={class:"row"},S={class:"panel"},U={class:"muted"},j={class:"panel"},E={key:1,class:"panel"},H=g({__name:"CourseDetail",setup(L){const k=x(),o=n(null),v=n([]),m=n([]),_=n([]),i=n(""),d=n(1);M(async()=>{const r=String(k.params.id);o.value=await V(r),v.value=await f(r),m.value=await h.resources.where("courseId").equals(r).toArray(),_.value=await h.notes.where("courseId").equals(r).toArray()});async function b(){o.value&&i.value.trim()&&(await B(o.value.id,i.value.trim(),d.value||1),v.value=await f(o.value.id),i.value="",d.value=1)}return(r,t)=>o.value?(l(),a("div",D,[e("div",T,[e("div",q,u(o.value.name),1),e("span",A,"学期："+u(o.value.term||"-"),1)]),e("div",F,[e("div",I,[t[2]||(t[2]=e("div",{class:"h3"},"模块",-1)),e("div",N,[w(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>i.value=s),placeholder:"模块标题"},null,512),[[y,i.value]]),w(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>d.value=s),type:"number",placeholder:"排序"},null,512),[[y,d.value,void 0,{number:!0}]]),e("button",{onClick:b},"添加")]),e("ul",null,[(l(!0),a(c,null,p(v.value,s=>(l(),a("li",{key:s.id},u(s.order)+" · "+u(s.title),1))),128))])]),e("div",S,[t[3]||(t[3]=e("div",{class:"h3"},"关联资源",-1)),e("ul",null,[(l(!0),a(c,null,p(m.value,s=>(l(),a("li",{key:s.id},[C(u(s.title)+" ",1),e("span",U,"("+u(s.type)+")",1)]))),128))])])]),e("div",j,[t[4]||(t[4]=e("div",{class:"h3"},"关联笔记",-1)),e("ul",null,[(l(!0),a(c,null,p(_.value,s=>(l(),a("li",{key:s.id},u(s.title),1))),128))])])])):(l(),a("div",E,"课程不存在"))}});export{H as default};
