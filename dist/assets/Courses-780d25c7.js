import{d as y,r as v,o as V,c as r,a as t,w as p,v as _,F as h,b as w,g as b,f as u,h as x,i as U,j as B,t as f}from"./index-986e3362.js";import{l as N,c as T,r as $,u as D}from"./courses-04590859.js";import"./db-a38e221e.js";import"./id-0d1586fb.js";const F={class:"col"},M={class:"row"},S={class:"row"},j={class:"panel"},A={style:{width:"100%"}},E=["onClick"],I=["onUpdate:modelValue"],L=["onClick"],K=y({__name:"Courses",setup(q){const l=v(""),i=v(""),m=v([]),d=v({});async function c(){m.value=await N()}V(c);async function C(){l.value.trim()&&(await T(l.value.trim(),i.value.trim()||void 0),l.value="",i.value="",await c())}async function g(o){await $(o),await c()}async function k(o){const a=(d.value[o]||"").trim();if(!a)return;const s=m.value.find(n=>n.id===o),e=Array.from(new Set([...(s==null?void 0:s.tags)||[],a]));await D(o,{tags:e}),d.value[o]="",await c()}return(o,a)=>{const s=b("router-link");return u(),r("div",F,[t("div",M,[a[2]||(a[2]=t("div",{class:"h1"},"课程",-1)),t("div",S,[p(t("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>l.value=e),placeholder:"课程名称"},null,512),[[_,l.value]]),p(t("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>i.value=e),placeholder:"学期"},null,512),[[_,i.value]]),t("button",{onClick:C},"创建课程")])]),t("div",j,[t("table",A,[a[3]||(a[3]=t("thead",null,[t("tr",null,[t("th",{align:"left"},"名称"),t("th",{align:"left"},"学期"),t("th",{align:"left"},"标签"),t("th",null,"操作")])],-1)),t("tbody",null,[(u(!0),r(h,null,w(m.value,e=>(u(),r("tr",{key:e.id},[t("td",null,[x(s,{class:"link",to:`/courses/${e.id}`},{default:U(()=>[B(f(e.name),1)]),_:2},1032,["to"])]),t("td",null,f(e.term||"-"),1),t("td",null,[(u(!0),r(h,null,w(e.tags,n=>(u(),r("span",{key:n,class:"tag"},f(n),1))),128))]),t("td",null,[t("button",{class:"danger",onClick:n=>g(e.id)},"删除",8,E),p(t("input",{"onUpdate:modelValue":n=>d.value[e.id]=n,placeholder:"添加标签"},null,8,I),[[_,d.value[e.id]]]),t("button",{onClick:n=>k(e.id)},"添加",8,L)])]))),128))])])])])}}});export{K as default};
