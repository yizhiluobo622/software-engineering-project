import{d as o}from"./db-a38e221e.js";import{d as p,r as u,o as m,c as a,a as s,t as l,F as _,b as k,e as r,f as n}from"./index-986e3362.js";const w={class:"col"},h={class:"grid cols-3"},y={class:"panel"},f={class:"panel"},g={class:"panel"},B={class:"panel"},b={class:"panel"},A={class:"panel"},D={key:0,class:"muted"},N={key:1,class:"muted"},x={key:2,class:"muted"},M=p({__name:"Dashboard",setup(C){const t=u({courses:0,resources:0,notes:0}),c=u(0),v=u([]);return m(async()=>{t.value.courses=await o.courses.count(),t.value.resources=await o.resources.count(),t.value.notes=await o.notes.count();const d=await o.tasks.count(),e=await o.tasks.where("done").equals(!0).count();c.value=d?Math.round(e/d*100):0,v.value=await o.notes.orderBy("updatedAt").reverse().limit(5).toArray()}),(d,e)=>(n(),a("div",w,[e[6]||(e[6]=s("div",{class:"row"},[s("div",{class:"h1"},"仪表盘"),s("span",{class:"muted"},"概览与最近更新")],-1)),s("div",h,[s("div",y,[e[0]||(e[0]=s("div",{class:"h3"},"课程",-1)),s("div",null,l(t.value.courses),1)]),s("div",f,[e[1]||(e[1]=s("div",{class:"h3"},"资源",-1)),s("div",null,l(t.value.resources),1)]),s("div",g,[e[2]||(e[2]=s("div",{class:"h3"},"笔记",-1)),s("div",null,l(t.value.notes),1)])]),s("div",B,[e[3]||(e[3]=s("div",{class:"h3"},"任务完成率",-1)),s("div",null,l(c.value)+"%",1)]),s("div",b,[e[4]||(e[4]=s("div",{class:"h3"},"最近更新",-1)),s("ul",null,[(n(!0),a(_,null,k(v.value,i=>(n(),a("li",{key:i.id},l(i.title)+" · "+l(new Date(i.updatedAt).toLocaleString()),1))),128))])]),s("div",A,[e[5]||(e[5]=s("div",{class:"h3"},"空态与错误示例",-1)),t.value.courses===0?(n(),a("div",D,"暂无课程，前往“课程”页面创建一个吧。")):r("",!0),t.value.resources===0?(n(),a("div",N,"暂无资源，前往“资源库”导入文件。")):r("",!0),t.value.notes===0?(n(),a("div",x,"暂无笔记，前往“笔记”页面新建。")):r("",!0)])]))}});export{M as default};
